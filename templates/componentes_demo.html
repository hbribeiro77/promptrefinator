{% extends "base.html" %}

{% block title %}Demonstração de Componentes{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header da Página -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="h3 mb-0">
                        <i class="bi bi-puzzle"></i>
                        Demonstração de Componentes
                    </h1>
                    <p class="text-muted mb-0">Visualize todos os componentes disponíveis no sistema</p>
                </div>
                <div>
                    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary">
                        <i class="bi bi-arrow-left"></i> Voltar ao Dashboard
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Dados de Exemplo -->
    {% set intimacao_exemplo = {
        'id': 'demo-001',
        'processo': '5000002-31.2025.8.21.0103',
        'orgao_julgador': 'Juízo da Vara Judicial da Comarca de Herval',
        'classe': 'Procedimento Comum',
        'disponibilizacao': '07/08/2025 às 16:30',
        'intimado': 'MINISTÉRIO PÚBLICO DO ESTADO DO RIO GRANDE DO SUL',
        'status': 'Pendente',
        'prazo': '15 dias',
        'classificacao_manual': 'ELABORAR PEÇA',
        'informacoes_adicionais': 'Esta é uma intimação de exemplo para demonstração dos componentes do sistema.',
        'data_criacao': '2025-01-15T10:30:00'
    } %}

    {% set intimacao_urgente = {
        'id': 'demo-002',
        'processo': '5000003-45.2025.8.21.0103',
        'orgao_julgador': 'Juízo da 1ª Vara Cível',
        'classe': 'Ação de Cobrança',
        'disponibilizacao': '08/08/2025 às 09:15',
        'intimado': 'BANCO DO BRASIL S.A.',
        'status': 'Urgente',
        'prazo': '3 dias',
        'classificacao_manual': 'RECURSO',
        'informacoes_adicionais': 'Intimação urgente com prazo reduzido para apresentação de defesa.',
        'data_criacao': '2025-01-16T14:20:00'
    } %}

    {% set intimacao_concluida = {
        'id': 'demo-003',
        'processo': '5000004-67.2025.8.21.0103',
        'orgao_julgador': 'Juízo da 3ª Vara Cível',
        'classe': 'Execução de Título Extrajudicial',
        'disponibilizacao': '05/08/2025 às 11:45',
        'intimado': 'CAIXA ECONÔMICA FEDERAL',
        'status': 'Concluído',
        'prazo': '10 dias',
        'classificacao_manual': 'PETIÇÃO',
        'informacoes_adicionais': 'Processo já concluído com sucesso. Documentação arquivada.',
        'data_criacao': '2025-01-10T08:15:00'
    } %}

    <!-- Seção 1: Cards de Intimação Completos -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-card-text"></i>
                        Cards de Intimação Completos
                    </h5>
                    <small class="text-muted">Componente: <code>partials/card_intimacao.html</code></small>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 col-lg-4 mb-3">
                            <h6 class="text-muted mb-2">Card Padrão (com ações)</h6>
                            {% set intimacao = intimacao_exemplo %}
                            {% include 'partials/card_intimacao.html' %}
                        </div>
                        <div class="col-md-6 col-lg-4 mb-3">
                            <h6 class="text-muted mb-2">Card Urgente</h6>
                            {% set intimacao = intimacao_urgente %}
                            {% include 'partials/card_intimacao.html' %}
                        </div>
                        <div class="col-md-6 col-lg-4 mb-3">
                            <h6 class="text-muted mb-2">Card Concluído (sem ações)</h6>
                            {% set intimacao = intimacao_concluida %}
                            {% set show_actions = False %}
                            {% include 'partials/card_intimacao.html' %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Seção 2: Cards Compactos -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-card-list"></i>
                        Cards Compactos
                    </h5>
                    <small class="text-muted">Componente: <code>partials/card_intimacao_compact.html</code></small>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <h6 class="text-muted mb-2">Card Compacto Padrão</h6>
                            {% set intimacao = intimacao_exemplo %}
                            {% include 'partials/card_intimacao_compact.html' %}
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6 class="text-muted mb-2">Card Compacto Urgente</h6>
                            {% set intimacao = intimacao_urgente %}
                            {% include 'partials/card_intimacao_compact.html' %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Seção 3: Tabela de Análises Básica -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-table"></i>
                        Tabela de Análises Básica
                    </h5>
                    <small class="text-muted">Componente: <code>partials/tabela_analises.html</code></small>
                </div>
                <div class="card-body">
                    {% set analise_exemplo = {
                        'id': 'analise-001',
                        'intimacao_id': 'demo-001',
                        'data_analise': '2025-01-15T10:30:00',
                        'contexto': 'Contexto da intimação de exemplo para demonstração.',
                        'prompt_nome': 'Classificar Intimação',
                        'prompt_completo': 'Prompt completo de exemplo para demonstração.',
                        'classificacao_manual': 'ELABORAR PEÇA',
                        'informacao_adicional': 'Informação adicional de exemplo.',
                        'resultado_ia': 'ELABORAR PEÇA',
                        'acertou': True,
                        'modelo': 'gpt-4',
                        'temperatura': 0.1,
                        'tempo_processamento': 2.5,

                    } %}
                    
                    {% set analise_erro = {
                        'id': 'analise-002',
                        'intimacao_id': 'demo-002',
                        'data_analise': '2025-01-16T14:20:00',
                        'contexto': 'Outro contexto de intimação para demonstração.',
                        'prompt_nome': 'Classificar Intimação',
                        'prompt_completo': 'Outro prompt completo de exemplo.',
                        'classificacao_manual': 'URGÊNCIA',
                        'informacao_adicional': 'Outra informação adicional.',
                        'resultado_ia': 'ANALISAR PROCESSO',
                        'acertou': False,
                        'modelo': 'gpt-4',
                        'temperatura': 0.2,
                        'tempo_processamento': 3.1,

                    } %}
                    
                    {% set analises = [analise_exemplo, analise_erro] %}
                    {% include 'partials/tabela_analises.html' %}
                </div>
            </div>
        </div>
    </div>

    <!-- Seção 4: Tabela de Análises Avançada -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-table"></i>
                        Tabela de Análises Avançada
                    </h5>
                    <small class="text-muted">Componente: <code>partials/tabela_analises_avancada.html</code></small>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle me-2"></i>
                        <strong>Componente Avançado:</strong> Esta tabela inclui configuração de colunas, filtros rápidos, paginação, contadores e exportação.
                    </div>
                    
                    {% set analises = [analise_exemplo, analise_erro] %}
                    {% set prompts = [
                        {'id': 'prompt-001', 'nome': 'Classificar Intimação'},
                        {'id': 'prompt-002', 'nome': 'Analisar Processo'}
                    ] %}
                    {% include 'partials/tabela_analises_avancada.html' %}
                </div>
            </div>
        </div>
    </div>

    <!-- Seção 5: Modais -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-window"></i>
                        Modais
                    </h5>
                    <small class="text-muted">Componente: <code>partials/modais_prompt_resposta.html</code></small>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Modal de Prompt</h6>
                            <p class="text-muted">Modal para exibir prompts completos enviados para a IA.</p>
                            <button class="btn btn-outline-info" onclick="mostrarModalPrompt()">
                                <i class="bi bi-code-square"></i>
                                Ver Modal de Prompt
                            </button>
                        </div>
                        <div class="col-md-6">
                            <h6>Modal de Resposta</h6>
                            <p class="text-muted">Modal para exibir respostas completas da IA.</p>
                            <button class="btn btn-outline-success" onclick="mostrarModalResposta()">
                                <i class="bi bi-chat-dots"></i>
                                Ver Modal de Resposta
                            </button>
                        </div>
                    </div>
                    
                    <!-- Incluir os modais -->
                    {% include 'partials/modais_prompt_resposta.html' %}
                </div>
            </div>
        </div>
    </div>

    <!-- Seção 6: Badges e Status -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-tags"></i>
                        Badges e Status
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Badges de Classificação</h6>
                            <div class="mb-3">
                                <span class="badge bg-success me-2">ELABORAR PEÇA</span>
                                <span class="badge bg-warning me-2">ANALISAR PROCESSO</span>
                                <span class="badge bg-danger me-2">URGÊNCIA</span>
                                <span class="badge bg-info me-2">CONTATAR ASSISTIDO</span>
                                <span class="badge bg-secondary me-2">RENUNCIAR PRAZO</span>
                                <span class="badge bg-primary me-2">ENCAMINHAR INTIMAÇÃO</span>
                            </div>
                            
                            <h6>Badges de Status</h6>
                            <div class="mb-3">
                                <span class="badge bg-success">
                                    <i class="bi bi-check-circle"></i> Acertou
                                </span>
                                <span class="badge bg-danger">
                                    <i class="bi bi-x-circle"></i> Errou
                                </span>
                                <span class="badge bg-warning">Pendente</span>
                                <span class="badge bg-info">Em Processamento</span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6>Alertas do Sistema</h6>
                            <div class="alert alert-info alert-dismissible fade show" role="alert">
                                <i class="bi bi-info-circle me-2"></i>
                                <strong>Informação:</strong> Esta é uma mensagem informativa.
                                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                            </div>
                            
                            <div class="alert alert-success alert-dismissible fade show" role="alert">
                                <i class="bi bi-check-circle me-2"></i>
                                <strong>Sucesso:</strong> Operação realizada com sucesso!
                                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Nova seção: Demonstração de Alertas Persistentes -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">
                                        <i class="bi bi-bell me-2"></i>
                                        Demonstração de Alertas Persistentes
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <p class="text-muted mb-3">
                                        Os alertas persistentes só desaparecem quando você clica no botão 'x'. 
                                        Use os botões abaixo para testar diferentes tipos de alertas.
                                    </p>
                                    
                                    <div class="row">
                                        <div class="col-md-3 mb-2">
                                            <button type="button" class="btn btn-success w-100" onclick="testarAlertaSucesso()">
                                                <i class="bi bi-check-circle me-2"></i>
                                                Sucesso
                                            </button>
                                        </div>
                                        <div class="col-md-3 mb-2">
                                            <button type="button" class="btn btn-danger w-100" onclick="testarAlertaErro()">
                                                <i class="bi bi-exclamation-triangle me-2"></i>
                                                Erro
                                            </button>
                                        </div>
                                        <div class="col-md-3 mb-2">
                                            <button type="button" class="btn btn-warning w-100" onclick="testarAlertaAviso()">
                                                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                                                Aviso
                                            </button>
                                        </div>
                                        <div class="col-md-3 mb-2">
                                            <button type="button" class="btn btn-info w-100" onclick="testarAlertaInfo()">
                                                <i class="bi bi-info-circle me-2"></i>
                                                Informação
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-md-6 mb-2">
                                            <button type="button" class="btn btn-outline-primary w-100" onclick="testarAlertaCustomizado()">
                                                <i class="bi bi-gear me-2"></i>
                                                Alerta Customizado
                                            </button>
                                        </div>
                                        <div class="col-md-6 mb-2">
                                            <button type="button" class="btn btn-outline-secondary w-100" onclick="limparTodosAlertas()">
                                                <i class="bi bi-trash me-2"></i>
                                                Limpar Todos
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="alert alert-info mt-3" role="alert">
                                        <i class="bi bi-lightbulb me-2"></i>
                                        <strong>Dica:</strong> Os alertas persistentes são úteis para mensagens importantes que o usuário deve ver e decidir quando fechar.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Seção 7: Informações dos Componentes -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-info-circle"></i>
                        Informações dos Componentes
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <h6>Card Completo</h6>
                            <ul class="list-unstyled">
                                <li><strong>Arquivo:</strong> <code>partials/card_intimacao.html</code></li>
                                <li><strong>Uso:</strong> Listas, dashboards, visualizações detalhadas</li>
                                <li><strong>Características:</strong> Todas as informações + ações</li>
                                <li><strong>Responsivo:</strong> Sim</li>
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <h6>Card Compacto</h6>
                            <ul class="list-unstyled">
                                <li><strong>Arquivo:</strong> <code>partials/card_intimacao_compact.html</code></li>
                                <li><strong>Uso:</strong> Tabelas, listas compactas</li>
                                <li><strong>Características:</strong> Informações essenciais</li>
                                <li><strong>Responsivo:</strong> Sim</li>
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <h6>Tabelas de Análises</h6>
                            <ul class="list-unstyled">
                                <li><strong>Básica:</strong> <code>partials/tabela_analises.html</code></li>
                                <li><strong>Avançada:</strong> <code>partials/tabela_analises_avancada.html</code></li>
                                <li><strong>Com Cards:</strong> <code>partials/tabela_analises_com_card.html</code></li>
                                <li><strong>Funcionalidades:</strong> Paginação, filtros, exportação</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Funções para demonstração
function mostrarToast(mensagem, tipo = 'info') {
    console.log(`Toast ${tipo}: ${mensagem}`);
    alert(`${tipo.toUpperCase()}: ${mensagem}`);
}

// Substituir funções do componente para demonstração
function visualizarIntimacao(id) {
    mostrarToast(`Visualizando intimação: ${id}`, 'info');
}

function editarIntimacao(id) {
    mostrarToast(`Editando intimação: ${id}`, 'warning');
}

function excluirIntimacao(id) {
    if (confirm('Tem certeza que deseja excluir esta intimação?')) {
        mostrarToast(`Intimação ${id} excluída!`, 'success');
    }
}

// Funções para modais (demonstração)
function mostrarModalPrompt() {
    document.getElementById('prompt-intimacao-id').textContent = 'demo-001';
    document.getElementById('prompt-completo-conteudo').textContent = `# Prompt Completo de Exemplo

Este é um prompt completo de exemplo para demonstração dos componentes do sistema.

## Contexto da Intimação
Contexto da intimação de exemplo para demonstração.

## Instruções
Classifique a intimação de acordo com as seguintes categorias:
- ELABORAR PEÇA
- ANALISAR PROCESSO
- URGÊNCIA
- CONTATAR ASSISTIDO
- RENUNCIAR PRAZO
- ENCAMINHAR INTIMAÇÃO

## Formato de Resposta
Responda apenas com a classificação escolhida.`;

    const modal = new bootstrap.Modal(document.getElementById('modalPromptCompleto'));
    modal.show();
}

function mostrarModalResposta() {
    document.getElementById('resposta-intimacao-id').textContent = 'demo-001';
    document.getElementById('resposta-completa-conteudo').textContent = `ELABORAR PEÇA

Baseado no contexto fornecido, esta intimação requer a elaboração de uma peça processual. O conteúdo indica a necessidade de apresentação de defesa ou manifestação técnica.`;

    const modal = new bootstrap.Modal(document.getElementById('modalRespostaCompleta'));
    modal.show();
}

// Funções para copiar conteúdo (demonstração)
function copiarPrompt() {
    const conteudo = document.getElementById('prompt-completo-conteudo').textContent;
    navigator.clipboard.writeText(conteudo).then(() => {
        mostrarToast('Prompt copiado para a área de transferência!', 'success');
    });
}

function copiarResposta() {
    const conteudo = document.getElementById('resposta-completa-conteudo').textContent;
    navigator.clipboard.writeText(conteudo).then(() => {
        mostrarToast('Resposta copiada para a área de transferência!', 'success');
    });
}

// Funções para alertas persistentes (demonstração)
function testarAlertaSucesso() {
    showSuccessAlert('Operação realizada com sucesso! Este alerta só desaparece quando você clicar no X.');
}

function testarAlertaErro() {
    showErrorAlert('Ocorreu um erro inesperado. Este alerta só desaparece quando você clicar no X.');
}

function testarAlertaAviso() {
    showWarningAlert('Atenção: este é um aviso importante que requer sua atenção.');
}

function testarAlertaInfo() {
    showInfoAlert('Esta é uma mensagem informativa que permanecerá visível até ser fechada.');
}

function testarAlertaCustomizado() {
    showPersistentAlert('Este é um alerta personalizado com título customizado.', 'info', 'Sistema Personalizado');
}

function limparTodosAlertas() {
    // Remover todos os alertas persistentes personalizados
    const alertas = document.querySelectorAll('[id^="persistent-alert-"]');
    alertas.forEach(alerta => {
        const bsAlert = new bootstrap.Alert(alerta);
        bsAlert.close();
    });
    mostrarToast('Alertas personalizados removidos!', 'info');
}

// Inicializar tooltips
document.addEventListener('DOMContentLoaded', function() {
    if (typeof bootstrap !== 'undefined' && bootstrap.Tooltip) {
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[title]'));
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    }
});
</script>
{% endblock %}
